# راهنمای حل مشکل Speech Recognition

## مشکلات رایج و راه‌حل‌ها

### 1. خطای "not-allowed" - مجوز میکروفون داده نشده

**مشکل:** مرورگر مجوز دسترسی به میکروفون را نداده است.

**راه‌حل:**
1. روی آیکون میکروفون در نوار آدرس مرورگر کلیک کنید
2. مجوز "Allow" را انتخاب کنید
3. صفحه را refresh کنید
4. یا از دکمه "درخواست مجوز میکروفون" در پیام خطا استفاده کنید

### 2. خطای "service-not-allowed" - HTTPS مورد نیاز است

**مشکل:** Speech Recognition فقط روی HTTPS کار می‌کند.

**راه‌حل:**
- در development: از `localhost` استفاده کنید
- در production: از HTTPS استفاده کنید
- برای تست محلی: `ngrok` یا `mkcert` استفاده کنید

### 3. خطای "audio-capture" - میکروفون در دسترس نیست

**مشکل:** میکروفون به سیستم متصل نیست یا توسط برنامه دیگری استفاده می‌شود.

**راه‌حل:**
1. مطمئن شوید میکروفون به سیستم متصل است
2. برنامه‌های دیگر که از میکروفون استفاده می‌کنند را ببندید
3. تنظیمات صدا را بررسی کنید

### 4. خطای "network" - سرویس Speech Recognition در دسترس نیست

**مشکل:** سرویس Google Speech Recognition در دسترس نیست.

**راه‌حل:**
1. اتصال اینترنت را بررسی کنید
2. چند ثانیه صبر کنید و دوباره تلاش کنید
3. اگر مشکل ادامه داشت، از VPN استفاده کنید

### 5. مرورگر از Speech Recognition پشتیبانی نمی‌کند

**مشکل:** مرورگر قدیمی یا غیر پشتیبانی شده.

**راه‌حل:**
- از Chrome، Edge، یا Safari استفاده کنید
- مرورگر را به آخرین نسخه بروزرسانی کنید

## بررسی وضعیت

برای بررسی وضعیت Speech Recognition:

1. Console مرورگر را باز کنید (F12)
2. پیام‌های `[STT]` را دنبال کنید
3. وضعیت نمایش داده شده در بالای صفحه را بررسی کنید

## تست دستی

برای تست دستی:

```javascript
// در Console مرورگر اجرا کنید
navigator.mediaDevices.getUserMedia({ audio: true })
  .then(stream => {
    console.log("میکروفون در دسترس است");
    stream.getTracks().forEach(track => track.stop());
  })
  .catch(error => {
    console.error("خطا در دسترسی به میکروفون:", error);
  });
```

## پشتیبانی مرورگرها

- ✅ Chrome 25+
- ✅ Edge 79+
- ✅ Safari 14.1+
- ❌ Firefox (پشتیبانی محدود)
- ❌ Internet Explorer

## نکات مهم

1. **HTTPS اجباری است** - فقط در localhost یا HTTPS کار می‌کند
2. **مجوز میکروفون** - باید توسط کاربر داده شود
3. **مرورگر پشتیبانی شده** - Chrome، Edge، Safari
4. **اتصال اینترنت** - برای سرویس Google Speech Recognition

